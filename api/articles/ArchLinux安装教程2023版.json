{"title":"ArchLinux安装教程2023版","uid":"2636d32b6c4a1f44391218816f7958c0","slug":"ArchLinux安装教程2023版","date":"2023-01-14T04:25:12.000Z","updated":"2023-01-16T03:24:37.838Z","comments":true,"path":"api/articles/ArchLinux安装教程2023版.json","keywords":null,"cover":[],"content":"<h2 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2><h3 id=\"step1\"><a href=\"#step1\" class=\"headerlink\" title=\"step1.\"></a>step1.</h3><p>在windows上烧录镜像。<br>（1）balena镜像烧录软件</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">https:&#x2F;&#x2F;www.balena.io&#x2F;etcher&#x2F;?ref&#x3D;etcher_footer</code></pre>\n\n<p>###step2.<br>确认主板支持uefi启动方式，且确认硬盘为GPT不是MBR格式。</p>\n<h2 id=\"接入网络\"><a href=\"#接入网络\" class=\"headerlink\" title=\"接入网络\"></a>接入网络</h2><p><em>step3.</em></p>\n<p>使用iwctl进行连网（无线）进入iwd模式</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ device list</code></pre>\n<p>查看你的网卡名字，这里假设是wlan0，输入</p>\n<p>$ station wlan0 scan</p>\n<p>检查扫描网络，输入</p>\n<p>$ station wlan0 get-networks</p>\n<p>查看网络名字，假设名字叫MERCURY_DCBA，输入</p>\n<p>$ station wlan0 connect MERCURY_DCBA</p>\n<p>接着输入密码（如果有密码的话），输入exit</p>\n<p>$ exit</p>\n<p>退出iwd模式<br><img src=\"https://i0.hdslb.com/bfs/article/82e6437aa194b631e86994a3701c56ce5ac5083d.jpg@942w_707h_progressive.webp\" alt=\"alt\"><br>iwd 模式<br>step4.用reflector指令设置最快镜像源</p>\n<p>reflector –verbose –country China -p https -l 30 –sort rate –save &#x2F;etc&#x2F;pacman.d&#x2F;mirrorlist</p>\n<p>reflector<br>step5.使用cfdisk指令进行分区，选中目标分区按回车键，选择Write回车输入yes回车。</p>\n<p>cfdisk界面<br>step6.格式化刚分好的分区为ext4，如mkfs.ext4 &#x2F;dev&#x2F;sda6后面看到提示一直按回车。</p>\n<p>格式化磁盘分区<br>step7.挂载分区</p>\n<p>先挂载&#x2F;分区，同样这里分区号也是sda6</p>\n<p>mount &#x2F;dev&#x2F;sda6 &#x2F;mnt</p>\n<p>step8.建立boot文件夹</p>\n<p>mkdir &#x2F;mnt&#x2F;boot</p>\n<p>step9.挂载EFI分区</p>\n<p>mount &#x2F;dev&#x2F;sda2 &#x2F;mnt&#x2F;boot</p>\n<p>step10.安装基本系统</p>\n<p>执行pacstrap &#x2F;mnt base linux linux-firmware nano base-devel</p>\n<p>！需要保持网络通畅 ！<br>step11.生成fstab文件</p>\n<p>genfstab -U &#x2F;mnt &gt;&gt; &#x2F;mnt&#x2F;etc&#x2F;fstab</p>\n<p>step12.检查生成的fstab文件</p>\n<p>cat &#x2F;mnt&#x2F;etc&#x2F;fstab</p>\n<p>生成的fstab文件<br>step13.配置新系统</p>\n<p>切换到装好的系统</p>\n<p>arch-chroot &#x2F;mnt</p>\n<p>step14.建立swapfile（建议，没有swap空间无法休眠）</p>\n<p>step15.使用dd命令创建swap空间</p>\n<p>dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;swapfile bs&#x3D;2048 count&#x3D;1048576 status&#x3D;progress</p>\n<p>step16.接着chmod 600 &#x2F;swapfile</p>\n<p>建立swap空间</p>\n<p>mkswap &#x2F;swapfile</p>\n<p>激活swap空间</p>\n<p>swapon &#x2F;swapfile</p>\n<p>step17.修改&#x2F;etc&#x2F;fstab文件</p>\n<p>nano &#x2F;etc&#x2F;fstab</p>\n<p>到文件末尾输入</p>\n<p>&#x2F;swapfile none swap defaults 0 0</p>\n<p>ctrl＋x保存退出</p>\n<p>step18.设置时区</p>\n<p>ln -sf &#x2F;usr&#x2F;share&#x2F;zoneinfo&#x2F;Asia&#x2F;Urumqi &#x2F;etc&#x2F;localtime或timedatectl set-timezone Asia&#x2F;Urumqi</p>\n<p>step19.同步硬件时钟</p>\n<p>hwclock –systohc</p>\n<p>step20.设置locale</p>\n<p>nano &#x2F;etc&#x2F;locale.gen</p>\n<p>Ctrl+W 输入 #en_US 回车 找到UTF-8那一行 删掉前面的#（取消注释）</p>\n<p>Ctrl+W 输入 #zh_CN 回车 找到UTF-8那一行 删掉前面的#（取消注释）</p>\n<p>step21.创建并写入&#x2F;etc&#x2F;locale.conf文件</p>\n<p>nano &#x2F;etc&#x2F;locale.conf </p>\n<p>填入内容，注意这里只能填这个</p>\n<p>LANG&#x3D;en_US.UTF-8</p>\n<p>step22.创建并写入hostname</p>\n<p>nano &#x2F;etc&#x2F;hostname</p>\n<p>这里我写入的是 LinYu 作为hostname，你也可以输其他的</p>\n<p>step23.修改hosts</p>\n<p>nano &#x2F;etc&#x2F;hosts</p>\n<p>写入内容如图（中间的空白用tab而非空格），arch替换为你之前在hostname里写入的内容，其他都按照图里面的写</p>\n<p>hosts<br>step24.为root用户创建密码</p>\n<p>passwd</p>\n<p>然后输入并确认密码（linux终端的密码没有显示，输完直接回车）</p>\n<p>step25.创建启动器</p>\n<p>安装基本的包，这里使用grub为启动器</p>\n<p>pacman -S grub efibootmgr networkmanager network-manager-applet dialog wireless_tools wpa_supplicant os-prober mtools dosfstools ntfs-3g base-devel linux-headers reflector git sudo</p>\n<p>如果您不知道这些包是什么，请一定要与上面一致</p>\n<p>step26.如果您是intel的cpu，</p>\n<p>pacman -S intel-ucode</p>\n<p>如果是amd</p>\n<p>pacman -S amd-ucode</p>\n<p>step27.输入（双系统情况下）</p>\n<p>nano &#x2F;etc&#x2F;default&#x2F;grub</p>\n<p>在里面找一条空行输入</p>\n<p>GRUB_DISABLE_OS_PROBER&#x3D;false</p>\n<p>之后Ctrl-X 加Y回车保存退出</p>\n<p>step28.安装引导</p>\n<p>grub-install –target&#x3D;x86_64-efi –efi-directory&#x3D;&#x2F;boot –bootloader-id&#x3D;Arch</p>\n<p>这样就是正常的<br>step29.生成cfg文件</p>\n<p> grub-mkconfig -o &#x2F;boot&#x2F;grub&#x2F;grub.cfg</p>\n<p>这里有windows引导器<br>step30.安装连网工具</p>\n<p>pacman -S dhcpcd iwd</p>\n<p>step31.有线连接</p>\n<p>systemctl start dhcpcd</p>\n<p>systemctl enable dhcpcd</p>\n<p>step32.无线连接</p>\n<p>systemctl start iwd</p>\n<p>step33.如果是笔记本电脑，并且没有网卡驱动就需要用手机进行usb共享网络，用step31的命令联网。</p>\n<p>step34.创建用户（必要）</p>\n<p>useradd  -m  -G  wheel  arch-user</p>\n<p>step35.设置用户密码</p>\n<p>passwd arch-user</p>\n<p>step36.授权</p>\n<p>EDITOR&#x3D;nano visudo</p>\n<p>Ctrl+W 输入 # %wheel 回车 找到这行 删除前面的 #(注意＃和％中间有空格）</p>\n<p>不要误删除其他＃！！！<br>step37.安装显卡驱动</p>\n<p>安装AMD集显驱动</p>\n<p>pacman -S xf86-video-amdgpu</p>\n<p>安装NVIDIA独显驱动</p>\n<p>pacman -S nvidia nvidia-utils</p>\n<p>step38.pacman -S xorg</p>\n<p>这里我直接输入两个软件包<br>step39.安装桌面环境（如果没有想用的可以去Archwiki查）</p>\n<p>Gnome：</p>\n<p>pacman -S gdm</p>\n<p>KDE：</p>\n<p>pacman -S sddm</p>\n<p>Xfce || DDE：</p>\n<p>pacman -S lightdm lightdm-gtk-greeter</p>\n<p>设置开机自动启动，以lightdm为例：</p>\n<p>systemctl enable lightdm</p>\n<p>如果是别的请将这里的lightdm替换为你安装的那个dm</p>\n<p>step40.安装桌面</p>\n<p>Gnome：</p>\n<p>pacman -S gnome</p>\n<p>也可以另外再安装gnome-extra</p>\n<p>KDE：</p>\n<p>pacman -S plasma kde-applications packagekit-qt5</p>\n<p>Xfce：</p>\n<p>pacman -S xfce4 xfce4-goodies</p>\n<p>DDE：</p>\n<p>pacman -S deepin deepin-extra</p>\n<p>需要选择时直接回车</p>\n<p>step41.笔记本触摸板驱动</p>\n<p>pacman -S xf86-input-synaptics</p>\n<p>step42.安装中文字体</p>\n<p>pacman -S ttf-dejavu wqy-microhei</p>\n<p>step43.设置NetworkManager开机自启动</p>\n<p>systemctl start NetworkManager</p>\n<p>systemctl enable NetworkManager</p>\n<p>last.reboot</p>\n<p>重启电脑后就可以愉快的使用Arch啦！</p>\n<p>xfce4桌面<br> 作者：凌宇-LinYu <a href=\"https://www.bilibili.com/read/cv14375341?spm_id_from=333.999.0.0\">https://www.bilibili.com/read/cv14375341?spm_id_from=333.999.0.0</a> 出处：bilibili</p>\n","text":"准备工作step1.在windows上烧录镜像。（1）balena镜像烧录软件 https:&#x2F;&#x2F;www.balena.io&#x2F;etcher&#x2F;?ref&#x3D;etcher_footer ###step2.确认主板支持uefi启动方式，且确认...","link":"","photos":[],"count_time":{"symbolsCount":"4k","symbolsTime":"4 mins."},"categories":[],"tags":[{"name":"Linux archlinux","slug":"Linux-archlinux","count":1,"path":"api/tags/Linux-archlinux.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\"><span class=\"toc-text\">准备工作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#step1\"><span class=\"toc-text\">step1.</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%8E%A5%E5%85%A5%E7%BD%91%E7%BB%9C\"><span class=\"toc-text\">接入网络</span></a></li></ol>","author":{"name":"凌宇","slug":"blog-author","avatar":"https://www.linyu-dwz.tk/img/author.webp","link":"/","description":"","socials":{"github":"https://github.com/Fan223","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Hello World","uid":"b9663f58f18133b35bfe243f3e916a80","slug":"hello-world","date":"2023-01-15T11:00:00.114Z","updated":"2023-01-15T11:00:00.114Z","comments":true,"path":"api/articles/hello-world.json","keywords":null,"cover":null,"text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the ...","link":"","photos":[],"count_time":{"symbolsCount":440,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"凌宇","slug":"blog-author","avatar":"https://www.linyu-dwz.tk/img/author.webp","link":"/","description":"","socials":{"github":"https://github.com/Fan223","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{}}